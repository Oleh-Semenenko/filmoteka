{"mappings":"8pBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,uCCnBT,IAAAE,EAAAC,EAAA,S,uCAYMC,EAAQ,IAAI,EAAAC,EAAAC,SAAO,CACvBC,IAAK,qCACLC,OAAQ,CACNC,QAAS,sCAIPC,EAAeC,aAAaC,QAAQ,WACpCC,EAAqBC,KAAKC,MAAML,GAEhCM,EAAaL,aAAaC,QAAQ,SAClCK,EAAmBH,KAAKC,MAAMC,GAcpC,GAZmB,OAAfA,GAAwC,OAAjBN,IACzB,EAAAQ,EAAAC,yBACA,EAAAD,EAAAE,2BACA,EAAAF,EAAAG,wBAC0B,OAAjBX,IACT,EAAAQ,EAAAE,2BACA,EAAAF,EAAAI,kCACA,EAAAJ,EAAAG,yBAEA,EAAAH,EAAAK,oBAGmB,OAAjBb,EAEF,OADA,EAAAQ,EAAAM,4BACOC,IAMT,SAASC,IACP,IACE,IAAMC,EAAMd,EAAmBe,QAAO,SAACC,EAAK9B,GAC1CK,EAAMG,IAAM,sCAAyCuB,OAAH/B,GAClD,IAAMgC,EAAS3B,EAAM4B,cAErB,OADAH,EAAII,KAAKF,GACFF,C,GACN,IAEHK,QAAQC,IAAIR,GACTS,MAAK,SAAAC,GACJC,EAAmBD,E,IAEpBE,OAAM,SAAAC,G,OAASC,QAAQC,IAAIF,E,IAC9B,MAAOA,GACPC,QAAQC,IAAIF,E,EAlBhBtC,EAAAyC,KAAKC,WAAWC,iBAAiB,QAASnB,GAC1CA,IAuBA,GAAmB,OAAfV,EAEF,OADA,EAAAE,EAAAC,yBACO,EAAAD,EAAAG,uBAMT,SAASI,IACP,IACE,IAAME,EAAMV,EAAiBW,QAAO,SAACC,EAAK9B,GACxCK,EAAMG,IAAM,sCAAyCuB,OAAH/B,GAClD,IAAMgC,EAAS3B,EAAM4B,cAErB,OADAH,EAAII,KAAKF,GACFF,C,GACN,IAEHK,QAAQC,IAAIR,GACTS,MAAK,SAAAC,GACJC,EAAmBD,E,IAEpBE,OAAM,SAAAC,G,OAASC,QAAQC,IAAIF,E,GAChB,CAAd,MAAOA,GAAO,C,CAGlB,SAASF,EAAmBD,GAC1B,IAAMS,EAAiBC,SAASC,cAAc,iBAC7B,IAAjBX,EAAMvC,OACFgD,EAAeG,UAAUC,OAAO,kBAChCJ,EAAeG,UAAUE,IAAI,kBAEjCjD,EAAAyC,KAAKS,WAAWC,UAAwBhB,EAKrCiB,KACC,SAAAC,G,IACEC,EAAWD,EAAXC,YACAC,EAAcF,EAAdE,eACAC,EAAYH,EAAZG,aACAC,EAAMJ,EAANI,OACA5D,EAAEwD,EAAFxD,GACA6D,EAAYL,EAAZK,aAEA,MAAO,4CAEqB9B,OADK/B,EAAG,0CAGvC+B,OAF+B/B,EAAG,mBAaQ+B,OAX1C0B,EACI,4CAA0F1B,OAA9C0B,EAAY,oCAA2D1B,OAAzB/B,EAAG,wBAAqC+B,OAAf2B,EAAe,2BAClI,qBAGU3B,OAFL+B,EAAAC,GAAQ,sDAGMhC,OADT/B,EAAG,iCACqB+B,OAAf2B,EAAe,oDAIvC,mDAEqC3B,OADM/B,EAAG,+CACF+B,OAAP/B,EAAG,MACJ+B,OADQ2B,EAAe,gDAChB3B,OAAP/B,EAAG,MAGI+B,OAHA6B,EACpCL,KAAI,SAAAS,G,OAAQA,EAAKC,I,IACjBC,KAAK,MAAM,qDAEmBnC,OADM/B,EAAG,yDACF+B,OAAP/B,EAAG,MAGa+B,OAHT4B,EACrCQ,MAAM,KACNC,MAAM,EAAG,GACTF,KAAK,IAAI,uCAEVnC,OAF+C8B,EAAaQ,QAC5D,GACA,yC,IAMLH,KAAK,G,EAxEV,EAAA/C,EAAAK,oBACArB,EAAAyC,KAAK0B,SAASxB,iBAAiB,QAASpB,E,kZCxExC,IAAAvB,EAAAC,EAAA,SAEA,SAASmE,IACPpE,EAAAyC,KAAK4B,qBAAqBtB,UAAUE,IAAI,Y,CAG1C,SAASqB,IACPtE,EAAAyC,KAAK4B,qBAAqBtB,UAAUC,OAAO,Y,CAG7C,SAASuB,IACPvE,EAAAyC,KAAK0B,SAASK,UAAW,C,CAG3B,SAASC,IACPzE,EAAAyC,KAAKC,WAAW8B,UAAW,C,CAG7B,SAASE,IACP1E,EAAAyC,KAAK0B,SAASpB,UAAUE,IAAI,2B,CAG9B,SAAS0B,IACP3E,EAAAyC,KAAKC,WAAWK,UAAUC,OAAO,4B,uCCvBnC4B,EAAAC,QAAiB5E,EAAA,SAAA6E,aAA6C,SAAW7E,EAAA,SAAA8E,QAA6C,Q,sCC8CtH,IAAAC,E,6EA5CA,IAAIC,EAAY,GA6BhB,SAASC,EAAW7E,GAClB,OAAQ,GAAKA,GAAK8E,QAAO,+DAAiE,MAAQ,G,CAcpGH,EA1CA,SAA4BnF,GAC1B,IAAIsC,EAAQ8C,EAAUpF,GAOtB,OALKsC,IACHA,EAOJ,WACE,IACE,MAAM,IAAIpC,K,CACV,MAAOqF,GACP,IAAIC,GAAW,GAAKD,EAAIE,OAAOC,MAAK,yDAEpC,GAAIF,EAGF,OAAOH,EAAWG,EAAQ,G,CAI9B,MAAO,G,CApBGG,GACRP,EAAUpF,GAAMsC,GAGXA,C,KCZTlC,EAAA,SAAAwF,SAA8C7E,KAAKC,MAAM,+JCAzDZ,EAAA,S,kECAA,IAAAD,EAAAC,EAAA,SAEQyF,EAAoC1F,EAAAyC,KAApCkD,UAAWC,EAAyB5F,EAAAyC,KAAzB0B,SAAU0B,EAAe7F,EAAAyC,KAAfC,WAe7B,SAASoD,EAAcC,EAAUC,EAAYC,GAC3CF,EAAShD,UAAUE,IAAIgD,GACvBD,EAAWjD,UAAUC,OAAOiD,E,CAf9BP,EAAU/C,iBAAiB,SAE3B,SAA+BuD,GAC7B,OAAQA,EAAEC,OAAOC,QAAQC,QACvB,IAAK,UACHP,EAAcD,EAAYD,EAAU,4BACpC,MACF,IAAK,QACHE,EAAcF,EAAUC,EAAY,4B","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/watched-queue-films.js","src/js/utils.js","node_modules/@parcel/runtime-js/lib/runtime-6192de778078d0c8.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-2c4fddd3280a3f27.js","src/library.js","src/js/header.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import { refs } from './refs';\nimport Movies from './movies';\nimport {\n  addClassIsHidden,\n  removeClassIsHidden,\n  queueBtnDisabledTrue,\n  watchedBtnDisabledTrue,\n  addClassActiveOnQueueBtn,\n  removeClassActiveOnWatchedBtn,\n} from './utils';\nimport imgCard from '../images/poster-placeholder.png';\n\nconst films = new Movies({\n  url: 'https://api.themoviedb.org/3/movie',\n  params: {\n    api_key: 'f23afa13cf10e0a13fa8c4a5195ece8b',\n  },\n});\n\nconst savedWatched = localStorage.getItem('Watched');\nconst parcedWatchedFilms = JSON.parse(savedWatched);\n\nconst savedQueue = localStorage.getItem('Queue');\nconst parcedQueueFilms = JSON.parse(savedQueue);\n\nif (savedQueue === null && savedWatched === null) {\n  queueBtnDisabledTrue();\n  watchedBtnDisabledTrue();\n  removeClassIsHidden();\n} else if (savedWatched === null) {\n  watchedBtnDisabledTrue();\n  removeClassActiveOnWatchedBtn();\n  removeClassIsHidden();\n} else {\n  addClassIsHidden();\n}\n\nif (savedWatched === null) {\n  addClassActiveOnQueueBtn();\n  return onQueueBtnClick();\n}\n\nrefs.watchedBtn.addEventListener('click', onWatchBtnClick);\nonWatchBtnClick(); // вызов функции чтобы на странице библиотеки сразу показывались фильмы watched\n\nfunction onWatchBtnClick() {\n  try {\n    const arr = parcedWatchedFilms.reduce((acc, id) => {\n      films.url = `https://api.themoviedb.org/3/movie/${id}`;\n      const result = films.fetchMovies();\n      acc.push(result);\n      return acc;\n    }, []);\n\n    Promise.all(arr)\n      .then(value => {\n        isSendToTheLibrary(value);\n      })\n      .catch(error => console.log(error));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default onWatchBtnClick;\n\nif (savedQueue === null) {\n  queueBtnDisabledTrue();\n  return removeClassIsHidden();\n}\n\naddClassIsHidden();\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\n\nfunction onQueueBtnClick() {\n  try {\n    const arr = parcedQueueFilms.reduce((acc, id) => {\n      films.url = `https://api.themoviedb.org/3/movie/${id}`;\n      const result = films.fetchMovies();\n      acc.push(result);\n      return acc;\n    }, []);\n\n    Promise.all(arr)\n      .then(value => {\n        isSendToTheLibrary(value);\n      })\n      .catch(error => console.log(error));\n  } catch (error) {}\n}\n\nfunction isSendToTheLibrary(value) {\n  const isLibraryEmpty = document.querySelector('.message-wrap');\n  value.length === 0\n    ? isLibraryEmpty.classList.remove('movies-is-true')\n    : isLibraryEmpty.classList.add('movies-is-true');\n\n  refs.moviesList.innerHTML = renderMovie(value);\n}\n\nfunction renderMovie(movies) {\n  return movies\n    .map(\n      ({\n        poster_path,\n        original_title,\n        release_date,\n        genres,\n        id,\n        vote_average,\n      }) => {\n        return `\n      <li class=\"movie__item\" data-id=\"${id}\">\n  <a class=\"movie__link\" data-id=\"${id}\" href=\"\">\n   ${\n     poster_path\n       ? `<img src=\"https://image.tmdb.org/t/p/w342${poster_path}\" class=\"movie__image\" data-id=\"${id}\" alt=\"Poster movie ${original_title}\"  width=\"\" height=\"\"/>`\n       : `<img\n       src=\"${imgCard}\"\n        class=\"movie__image\"\n        data-id=\"${id}\"\n        alt=\"Poster movie ${original_title}\"\n        width=\"\"\n        height=\"\"\n      />`\n   }\n    <div class=\"movie__description\" data-id=\"${id}\">\n      <p class=\"movie__title\" data-id=\"${id}\">${original_title}</p>\n      <p class=\"movie__info\" data-id=\"${id}\">${genres\n          .map(elem => elem.name)\n          .join(', ')}  \n      <span class=\"movie__breacker\" data-id=\"${id}\"> | </span>\n    <span class=\"movie__year\" data-id=\"${id}\">${release_date\n          .split('-')\n          .slice(0, 1)\n          .join('')}</span><span class=\"movie__rating\">${vote_average.toFixed(\n          1\n        )}</span></p>\n    </div>\n  </a>\n</li>`;\n      }\n    )\n    .join('');\n}\n","import { refs } from './refs';\n\nfunction addClassIsHidden() {\n  refs.disabledNotification.classList.add('is-hidden');\n}\n\nfunction removeClassIsHidden() {\n  refs.disabledNotification.classList.remove('is-hidden');\n}\n\nfunction queueBtnDisabledTrue() {\n  refs.queueBtn.disabled = true;\n}\n\nfunction watchedBtnDisabledTrue() {\n  refs.watchedBtn.disabled = true;\n}\n\nfunction addClassActiveOnQueueBtn() {\n  refs.queueBtn.classList.add('header__item-btn--active');\n}\n\nfunction removeClassActiveOnWatchedBtn() {\n  refs.watchedBtn.classList.remove('.header__item-btn--active');\n}\n\nexport {\n  addClassIsHidden,\n  removeClassIsHidden,\n  queueBtnDisabledTrue,\n  watchedBtnDisabledTrue,\n  addClassActiveOnQueueBtn,\n  removeClassActiveOnWatchedBtn,\n};\n","module.exports = require('./helpers/bundle-url').getBundleURL('2Y0K8') + require('./helpers/bundle-manifest').resolve(\"2Aq75\");","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"2Y0K8\\\":\\\"library.e44b6e72.js\\\",\\\"2Aq75\\\":\\\"poster-placeholder.32073048.png\\\",\\\"7nwxg\\\":\\\"library.5ccb0a27.js\\\"}\"));","import './js/refs';\nimport './js/spinner';\nimport './js/movies';\nimport './data/genresOfMovies.json';\nimport './js/open-modal';\n// import './js/pagination';\nimport './js/button-up';\nimport './js/watched-queue-films';\nimport './js/header';\n","import { refs } from './refs';\n\nconst { headerBtn, queueBtn, watchedBtn } = refs;\n\nheaderBtn.addEventListener('click', changeActiveHeaderBtn);\n\nfunction changeActiveHeaderBtn(e) {\n  switch (e.target.dataset.action) {\n    case 'watched':\n      choseActiveEl(watchedBtn, queueBtn, 'header__item-btn--active');\n      break;\n    case 'queue':\n      choseActiveEl(queueBtn, watchedBtn, 'header__item-btn--active');\n      break;\n  }\n}\n\nfunction choseActiveEl(activate, deactivate, condition) {\n  activate.classList.add(condition);\n  deactivate.classList.remove(condition);\n}\n"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$4Nugj","parcelRequire","films","$4oB7I","default","url","params","api_key","savedWatched","localStorage","getItem","parcedWatchedFilms","JSON","parse","savedQueue","parcedQueueFilms","$1RLhk","queueBtnDisabledTrue","watchedBtnDisabledTrue","removeClassIsHidden","removeClassActiveOnWatchedBtn","addClassIsHidden","addClassActiveOnQueueBtn","onQueueBtnClick","onWatchBtnClick","arr","reduce","acc","concat","result","fetchMovies","push","Promise","all","then","value","isSendToTheLibrary","catch","error","console","log","refs","watchedBtn","addEventListener","isLibraryEmpty","document","querySelector","classList","remove","add","moviesList","innerHTML","map","param","poster_path","original_title","release_date","genres","vote_average","$parcel$interopDefault","$fIfIS","elem","name","join","split","slice","toFixed","queueBtn","$15bf6a3816abfb50$export$370c835f30cfac2b","disabledNotification","$15bf6a3816abfb50$export$18a0d4c4dfb4ddb7","$15bf6a3816abfb50$export$a00a756a105ff57b","disabled","$15bf6a3816abfb50$export$70f91fd8af750838","$15bf6a3816abfb50$export$c18364492f5df0d2","$15bf6a3816abfb50$export$7057459e365d2a4b","module","exports","getBundleURL","resolve","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","replace","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","register","$d35165bd5db5382a$var$headerBtn","headerBtn","$d35165bd5db5382a$var$queueBtn","$d35165bd5db5382a$var$watchedBtn","$d35165bd5db5382a$var$choseActiveEl","activate","deactivate","condition","e","target","dataset","action"],"version":3,"file":"library.e44b6e72.js.map"}