{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/watched-queue-films.js","node_modules/@parcel/runtime-js/lib/runtime-4479eef828ebf829.js","node_modules/@parcel/runtime-js/lib/runtime-593c9d362ee6cc8e.js","src/library.js","src/js/header.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","import { refs } from './refs';\nimport Movies from './movies';\nimport imgCard from '../images/poster-placeholder.png';\n\nconst films = new Movies({\n  url: 'https://api.themoviedb.org/3/movie',\n  params: {\n    api_key: 'f23afa13cf10e0a13fa8c4a5195ece8b',\n  },\n});\n\nconst savedWatched = localStorage.getItem('Watched');\nconst parcedWatchedFilms = JSON.parse(savedWatched);\n\nconst savedQueue = localStorage.getItem('Queue');\nconst parcedQueueFilms = JSON.parse(savedQueue);\n\nif (!savedWatched || parcedWatchedFilms.length === 0) {\n  return;\n} else {\n  refs.watchedBtn.addEventListener('click', onWatchBtnClick);\n\n  onWatchBtnClick(); // вызов функции чтобы на странице библиотеки сразу показывались фильмы watched\n\n  function onWatchBtnClick() {\n    try {\n      const arr = parcedWatchedFilms.reduce((acc, id) => {\n        films.url = `https://api.themoviedb.org/3/movie/${id}`;\n        const result = films.fetchMovies();\n        acc.push(result);\n        return acc;\n      }, []);\n\n      Promise.all(arr)\n        .then(value => {\n          refs.moviesList.innerHTML = renderMovie(value);\n        })\n        .catch(error => console.log(error));\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nexport default onWatchBtnClick;\n\nif (!savedQueue || parcedWatchedFilms.length === 0) {\n  return;\n} else {\n  refs.queueBtn.addEventListener('click', onQueueBtnClick);\n\n  function onQueueBtnClick() {\n    try {\n      const arr = parcedQueueFilms.reduce((acc, id) => {\n        films.url = `https://api.themoviedb.org/3/movie/${id}`;\n        const result = films.fetchMovies();\n        acc.push(result);\n        return acc;\n      }, []);\n\n      Promise.all(arr)\n        .then(value => {\n          refs.moviesList.innerHTML = renderMovie(value);\n        })\n        .catch(error => console.log(error));\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nfunction renderMovie(movies) {\n  return movies\n    .map(\n      ({\n        poster_path,\n        original_title,\n        release_date,\n        genres,\n        id,\n        vote_average,\n      }) => {\n        console.log(genres);\n        return `\n      <li class=\"movie__item\" data-id=\"${id}\">\n  <a class=\"movie__link\" data-id=\"${id}\" href=\"\">\n   ${\n     poster_path\n       ? `<img src=\"https://image.tmdb.org/t/p/w342${poster_path}\" class=\"movie__image\" data-id=\"${id}\" alt=\"Poster movie ${original_title}\"  width=\"\" height=\"\"/>`\n       : `<img\n       src=\"${imgCard}\"\n        class=\"movie__image\"\n        data-id=\"${id}\"\n        alt=\"Poster movie ${original_title}\"\n        width=\"\"\n        height=\"\"\n      />`\n   }\n    <div class=\"movie__description\" data-id=\"${id}\">\n      <p class=\"movie__title\" data-id=\"${id}\">${original_title}</p>\n      <p class=\"movie__info\" data-id=\"${id}\">${genres\n          .map(elem => elem.name)\n          .join(', ')}  \n      <span class=\"movie__breacker\" data-id=\"${id}\"> | </span>\n    <span class=\"movie__year\" data-id=\"${id}\">${release_date\n          .split('-')\n          .slice(0, 1)\n          .join(\n            ''\n          )}</span><span class=\"movie__rating\">${vote_average}</span></p>\n    </div>\n  </a>\n</li>`;\n      }\n    )\n    .join('');\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"anoP8\")).toString();","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"library.a74ad4e6.js\\\",\\\"anoP8\\\":\\\"poster-placeholder.32073048.png\\\",\\\"eM9ss\\\":\\\"library.05812f2a.js\\\"}\"));","import './js/refs';\nimport './js/spinner';\nimport './js/movies';\nimport './data/genresOfMovies.json';\nimport './js/open-modal';\n// import './js/pagination';\nimport './js/button-up';\nimport './js/watched-queue-films';\nimport './js/header';\n","import { refs } from './refs';\n\nconst { headerBtn, queueBtn, watchedBtn } = refs;\n\n\nheaderBtn.addEventListener('click', changeActiveHeaderBtn);\n\nfunction changeActiveHeaderBtn(e) {\n  switch (e.target.dataset.action) {\n    case 'watched':\n      choseActiveEl(watchedBtn, queueBtn, 'header__item-btn--active');\n      break;\n    case 'queue':\n      choseActiveEl(queueBtn, watchedBtn, 'header__item-btn--active');\n      break;\n  }\n}\n\nfunction choseActiveEl(activate, deactivate, condition) {\n  activate.classList.add(condition);\n  deactivate.classList.remove(condition);\n}\n\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$krGWQ","parcelRequire","films","$d6qMT","default","url","params","api_key","savedWatched","localStorage","getItem","parcedWatchedFilms","JSON","parse","savedQueue","parcedQueueFilms","onWatchBtnClick","arr","reduce","acc","result","fetchMovies","push","Promise","all","then","value","refs","moviesList","innerHTML","renderMovie","catch","error","console","log","watchedBtn","addEventListener","queueBtn","movies","map","poster_path","original_title","release_date","genres","vote_average","$parcel$interopDefault","$ibf7D","elem","name","join","split","slice","module","exports","URL","resolve","import","meta","toString","register","headerBtn","$8aad853c076397e7$var$headerBtn","$8aad853c076397e7$var$queueBtn","$8aad853c076397e7$var$watchedBtn","$8aad853c076397e7$var$choseActiveEl","activate","deactivate","condition","classList","add","remove","e","target","dataset","action"],"version":3,"file":"library.a74ad4e6.js.map"}