{"mappings":"khBAAA,IAAAA,EAAAC,EAAA,SAGMC,EAAQ,IAAI,E,WAAAC,SAAO,CACvBC,IAAK,qCACLC,OAAQ,CACNC,QAAS,sCAIPC,EAAeC,aAAaC,QAAQ,WACpCC,EAAqBC,KAAKC,MAAML,GAEhCM,EAAaL,aAAaC,QAAQ,SAClCK,EAAmBH,KAAKC,MAAMC,GAEpC,GAAKN,GAA+C,IAA9BG,EAAmBK,OAAzC,CAGEf,EAAAgB,KAAKC,WAAWC,iBAAiB,SAEjC,WACE,IACE,IAAMC,EAAMT,EAAmBU,QAAO,SAACC,EAAKC,GAC1CpB,EAAME,IAAM,sCAAyCmB,OAAHD,GAClD,IAAME,EAAStB,EAAMuB,cAErB,OADAJ,EAAIK,KAAKF,GACFH,C,GACN,IAEHM,QAAQC,IAAIT,GACTU,MAAK,SAAAC,GACJ9B,EAAAgB,KAAKe,WAAWC,UAAYC,EAAYH,E,IAEzCI,OAAM,SAAAC,G,OAASC,QAAQC,IAAIF,E,IAC9B,MAAOA,GACPC,QAAQC,IAAIF,E,KAKlB,GAAKtB,GAA4C,IAA9BH,EAAmBK,OAE/B,CACLf,EAAAgB,KAAKsB,SAASpB,iBAAiB,SAE/B,WACE,IACE,IAAMC,EAAML,EAAiBM,QAAO,SAACC,EAAKC,GACxCpB,EAAME,IAAM,sCAAyCmB,OAAHD,GAClD,IAAME,EAAStB,EAAMuB,cAErB,OADAJ,EAAIK,KAAKF,GACFH,C,GACN,IAEHM,QAAQC,IAAIT,GACTU,MAAK,SAAAC,GACJ9B,EAAAgB,KAAKe,WAAWC,UAAYC,EAAYH,E,IAEzCI,OAAM,SAAAC,G,OAASC,QAAQC,IAAIF,E,IAC9B,MAAOA,GACPC,QAAQC,IAAIF,E,MAKlB,SAASF,EAAYM,GACjB,OAAOA,EACJC,KAAI,SAAAC,G,IAAGC,EAAWD,EAAXC,YAAaC,EAAcF,EAAdE,eAAgBC,EAAYH,EAAZG,aAAcC,EAAMJ,EAANI,OAAQvB,EAAEmB,EAAFnB,GAEzD,OADAc,QAAQC,IAAIQ,GACL,4CAEqBtB,OADKD,EAAG,0CAECC,OADTD,EAAG,2DACoDC,OAA9CmB,EAAY,oCAA2DnB,OAAzBD,EAAG,wBAC/CC,OADqEoB,EAAe,2EAE1FpB,OADMD,EAAG,+CACFC,OAAPD,EAAG,MACJC,OADQoB,EAAe,gDAChBpB,OAAPD,EAAG,MAGIC,OAHAsB,EACpCL,KAAI,SAAAM,G,OAAQA,EAAKC,I,IACjBC,KAAK,MAAM,qDAEmBzB,OADMD,EAAG,yDACFC,OAAPD,EAAG,MAGxBC,OAH4BqB,EACrCK,MAAM,KACNC,MAAM,EAAG,GACTF,KAAK,IAAI,yC,IAKbA,KAAK,G","sources":["src/js/watched-queue-films.js"],"sourcesContent":["import { refs } from './refs';\nimport Movies from './Movies';\n\nconst films = new Movies({\n  url: 'https://api.themoviedb.org/3/movie',\n  params: {\n    api_key: 'f23afa13cf10e0a13fa8c4a5195ece8b',\n  },\n});\n\nconst savedWatched = localStorage.getItem('Watched');\nconst parcedWatchedFilms = JSON.parse(savedWatched);\n\nconst savedQueue = localStorage.getItem('Queue');\nconst parcedQueueFilms = JSON.parse(savedQueue);\n\nif (!savedWatched  || parcedWatchedFilms.length === 0) {\n  return;\n} else {\n  refs.watchedBtn.addEventListener('click', onWatchBtnClick);\n\n  function onWatchBtnClick() {\n    try {\n      const arr = parcedWatchedFilms.reduce((acc, id) => {\n        films.url = `https://api.themoviedb.org/3/movie/${id}`;\n        const result = films.fetchMovies();\n        acc.push(result);\n        return acc;\n      }, []);\n\n      Promise.all(arr)\n        .then(value => {\n          refs.moviesList.innerHTML = renderMovie(value);\n        })\n        .catch(error => console.log(error));\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nif (!savedQueue || parcedWatchedFilms.length === 0) {\n  return\n} else {\n  refs.queueBtn.addEventListener('click', onQueueBtnClick);\n\n  function onQueueBtnClick() {\n    try {\n      const arr = parcedQueueFilms.reduce((acc, id) => {\n        films.url = `https://api.themoviedb.org/3/movie/${id}`;\n        const result = films.fetchMovies();\n        acc.push(result);\n        return acc;\n      }, []);\n\n      Promise.all(arr)\n        .then(value => {\n          refs.moviesList.innerHTML = renderMovie(value);\n        })\n        .catch(error => console.log(error));\n    } catch (error) {\n      console.log(error);\n    }\n  }\n}\n\nfunction renderMovie(movies) {\n    return movies\n      .map(({ poster_path, original_title, release_date, genres, id }) => {\n        console.log(genres);\n        return `\n      <li class=\"movie__item\" data-id=\"${id}\">\n  <a class=\"movie__link\" data-id=\"${id}\" href=\"\">\n  <img src=\"https://image.tmdb.org/t/p/w342${poster_path}\" class=\"movie__image\" data-id=\"${id}\" alt=\"Poster movie ${original_title}\"  width=\"\" height=\"\" />\n    <div class=\"movie__description\" data-id=\"${id}\">\n      <p class=\"movie__title\" data-id=\"${id}\">${original_title}</p>\n      <p class=\"movie__info\" data-id=\"${id}\">${genres\n          .map(elem => elem.name)\n          .join(', ')}  \n      <span class=\"movie__breacker\" data-id=\"${id}\"> | </span>\n    <span class=\"movie__year\" data-id=\"${id}\">${release_date\n          .split('-')\n          .slice(0, 1)\n          .join('')}</span></p>\n    </div>\n  </a>\n</li>`; \n      })\n      .join('');\n  }\n\n\n\n"],"names":["$4Nugj","parcelRequire","films","default","url","params","api_key","savedWatched","localStorage","getItem","parcedWatchedFilms","JSON","parse","savedQueue","parcedQueueFilms","length","refs","watchedBtn","addEventListener","arr","reduce","acc","id","concat","result","fetchMovies","push","Promise","all","then","value","moviesList","innerHTML","renderMovie","catch","error","console","log","queueBtn","movies","map","param","poster_path","original_title","release_date","genres","elem","name","join","split","slice"],"version":3,"file":"library.54dca9d0.js.map"}